const responseData = require("../response-data.js");
// const Moker = require('mockjs');

// /algorithm/model/class/logwarn/id/1db45c9a20f03668/variables/stats?fet=false&time=1582002540000,1582006200000&template_id=
module.exports = {
  method: "post",
  path: "/algorithm/model/class/logwarn/id/:modelId/variables/stats",
  fn: function(ctx, next) {
    // {"code":200,"msg":"OK","data":{"count":1,"variable":[{"field":"hostname","name":"hostname","stats":[{"key":"ip-172-31-7-3","count":19570}],"type":"string","total":1}]}}
    let result = {
      "count":1,
      "variable": [
        {
          "field":"hostname",
          "name":"hostname",
          "stats":[
            {"key":"ip-172-31-7-4ip-172-31-7-4ip-172-31-7-4","count":6},
          ],
          "type":"string",
          "total":1
        },
        {
          "field":"hostname",
          "name":"hostname",
          "stats":[
            {"key":"ip-172-31-7-4","count":5},
            {"key":"ip-172-3","count":3},
            {"key":"ip-172-31-7-1","count":2}
          ],
          "type":"string",
          "total":1200
        },
        {
          "field":"hostnum",
          "name":"hostnum",
          "stats":[
            {"key":"1723174","count":6}
          ],
          "type":"number",
          "total":1
        },
        {
          "field":"hostnum",
          "name":"hostnum",
          "stats":[
            {"key":"172174","count":2},
            {"key":"123174","count":8},
            {"key":"173174","count":2},
            {"key":"172374","count":9},
            {"key":"172314","count":4},
            {"key":"172317","count":7},
            {"key":"3174","count":3},
            {"key":"1774","count":6},
            {"key":"1723173","count":3}
          ],
          "type":"number",
          "total":2
        },
        {
          "field":"hostnum",
          "name":"hostnum",
          "stats":[],
          "type":"number",
          "total":0
        },
        {
          "field":"hostname",
          "name":"hostname",
          "stats":[
            {"key":"ip-172-31-7-4","count":6},
            {"key":"ip-172-31-7-3","count":3},
            {"key":"ip-172-31-7-5","count":5},
            {"key":"ip-172-31-7-6","count":6},
            {"key":"ip-172-31-7-1","count":1}
          ],
          "onatherStats":[
            {"key":"ip-172-31-7-4","count":3},
            {"key":"ip-172-31-7-3","count":9},
            {"key":"ip-172-31-7-5","count":2},
            {"key":"ip-172-31-7-6","count":7},
            {"key":"ip-172-31-7-1","count":2}
          ],
          "type":"string",
          "total":5
        },
        {
          "field":"hostname",
          "name":"hostname",
          "stats":[
            {"key":"ip-172-31-7-4","count":6},
            {"key":"ip-172-31-7-3","count":3},
            {"key":"ip-172-31-7-5","count":5},
            {"key":"ip-172-31-7-6","count":6},
            {"key":"ip-172-31-7-1","count":1}
          ],
          "type":"string",
          "total":5
        },
        {
          "field":"hostname",
          "name":"hostname",
          "stats":[
            {"key":"ip-172-31-7-4","count":6},
            {"key":"ip-172-31-7-3","count":3},
            {"key":"ip-172-31-7-5","count":5},
            {"key":"ip-172-31-7-6","count":6},
            {"key":"ip-172-31-7-1","count":1}
          ],
          "type":"string",
          "total":5
        },
      ]
    }
    // 对比数据contrast
    result = {
      "count":4,
      "variable":[
        {
          "field":"hostname",
          "name":"hostname",
          "stats":[
            {"key":"ip-172-31-7-6","count":590442},
            {"key":"ip-172-31-7-7","count":793442},
            {"key":"ip-172-31-7-ip-172-31-7-4ip-172-31-7-4ip-172-31-7-4ip-172-31-7-4ip-172-31-7-4ip-172-31-7-4ip-172-31-7-44ip-172-31-7-4","count":927738},
            {"key":"ip-172-31-7-4","count":322738,"type":1},
            {"key":"ip-172-31-7-5","count":622738,"type":1},
            {"key":"ip-172-31-7-7","count":293442,"type":1}
          ],
          "type":"string",
          "total":1200
        },
        {
          "field":"return-code",
          "name":"return-code",
          "stats":[
            {"key":"172174","count":2},
            {"key":"123174","count":8},
            {"key":"173174","count":2},
            {"key":"172374","count":9},
            {"key":"172314","count":4},
            {"key":"172317","count":7},
            {"key":"723174","count":8},
            {"key":"17277","count":2}
          ],
          "type":"number",
          "trend":"up",
          "total":0
        },
        {
          "field":"var_1579678090600",
          "name":"test",
          "stats":[],
          "type":"number",
          "trend":"down",
          "total":0
        },
        {
          "field":"var_1582603971349",
          "name":"撒入3多长",
          "stats":[],
          "type":"number",
          "trend":"fair",
          "total":0
        }
      ]
    }
    ctx.body = responseData.success(result);
    next();
  }
}
